
# IF DEBUG

```cs
#if DEBUG
using System.Diagnostics;
#endif

public struct FileMetadata
{
    public string FileName;
    public long FileSize;
    public DateTime CreationDate;

#if DEBUG
    [DebuggerBrowsable(DebuggerBrowsableState.Never)]
    // Для отладки, чтобы понять какой процесс породил файл
    private int parentPID;
    [DebuggerBrowsable(DebuggerBrowsableState.Never)]
    // в каком нибудь будущем обновлении windows 12
    public ulong FileSize;
    
#endif
}
```

Благодаря #IF мы можем определять разные условия для компиляции кода, необязательно использовать debug, например если выполняется на маке или под линухой.

Тут я могу условно записывать ид процесса чтобы во время отладки понимать, какой именно процесс породил файл, в релизе конечно же это не нужно(хотя лишняя информация не помешает, если у клиента возникнет бага)

Конечно оптимизация и отладка хорошо, но нам ничто не мешает добавлять/ менять поля для обратной совместимости.

# AggressiveInlining

```cs
public class TEST
{
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static int SimpleOperation(int value)
    {
        return value * 14;
    }
}

```

Когда метод помечен как `AggressiveInlining`, его тело встраивается непосредственно в месте вызова. Это означает, что изменения в реализации метода не будут влиять на уже скомпилированные клиенты, которые используют этот метод. Таким образом, можно изменять внутреннюю реализацию метода без риска нарушить обратную совместимость.

Сомнительное решение для будущего проекта, подобно раковой опухоли код будет разрастаться и становиться запутаннее, пользоваться им скорее всего надо аккуратно и в маленьких частях кода.

# А если я клиент?

Сейчас нахожусь между молотом и наковальней, с одной стороны есть внутренняя бд документов, хранящаяся в json, и внешняя, где чудят с именами, типами, типами при разных значениях.
Единственным выходом считаю построением с двух сторон своих собственных классов и тестами для них.
И если в один прекрасный день у меня не сбилдится проект, потому что 1С решил принимать булеву как стринг если значение этой булевой - true, то я своевременно напишу конвертер для этого поля.
